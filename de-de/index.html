<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot-Prototyp</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <header>
        <h1>VA-Prototyp für OFA-Kundensupport-Dialog</h1>
    </header>
    <main>
        <p>Willkommen bei unserer VA-Demo! Wählen Sie eine Sprache, um fortzufahren.</p>
        <ul>
    <li><a href="/ofacontactdialog/en-gb/">UK - English</a></li>
    <li><a href="/ofacontactdialog/es-es/">Spain - Spanish</a></li>
    <li><a href="/ofacontactdialog/fr-fr/">France - French</a></li>
    <li><a href="/ofacontactdialog/it-it/">Italy - Italian</a></li>
    <li><a href="/ofacontactdialog/de-de/">Germany - German</a></li>
</ul>
    </main>
    <footer>
        <p>Powered by UEI</p>
    </footer>

<script type="text/javascript">
  (function(d, t) {
      var v = d.createElement(t), s = d.getElementsByTagName(t)[0];
      v.onload = function() {
        let currentUrl = window.location.href;
        console.log("Current URL: ", currentUrl);  // Log the current URL
        
        let urlParts = currentUrl.split("/");  // Split the URL into parts
        console.log("URL Parts: ", urlParts);  // Log the URL parts to verify

        let pathPrefix = urlParts[4] || "en-gb";  // Use the 4th part of the URL
        console.log("Extracted Path Prefix: ", pathPrefix);  // Log the extracted path prefix

        let languageCode = pathPrefix.substring(0, 2);  // Extract first two characters
        console.log("Extracted Language Code: ", languageCode);  // Log the language code

        // Initialize the Voiceflow chatbot with the extracted language code
        window.voiceflow.chat.load({
          verify: { projectID: '66f40267011c56b5632810e2' },
          url: 'https://general-runtime.voiceflow.com',
          versionID: 'production',
          assistant: { stylesheet: "/ofacontactdialog/test.css" },
          event: {
            type: 'launch',
            payload: {
              language: languageCode,  // Pass the extracted language code
              URL: currentUrl  // Pass the current URL for additional context
            }
          }
        });
      };
      v.src = "https://cdn.voiceflow.com/widget/bundle.mjs"; 
      v.type = "text/javascript"; 
      s.parentNode.insertBefore(v, s);
  })(document, 'script');
</script>
</body>
</html>

